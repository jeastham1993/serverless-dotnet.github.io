<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-testing/test-ready-lambda-functions">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Test Ready Lambda Functions | Serverless .NET</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://serverlessdotnet.dev/docs/testing/test-ready-lambda-functions"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content=".NET, serverless, aws, aws lambda, dotnet"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Test Ready Lambda Functions | Serverless .NET"><meta data-rh="true" name="description" content="To enable easy testing of our serverless applications there are some slight tweaks to make to our Lambda function. Instead of having a single constructor and performing all of our initiailization there, we are leveraging an internal constructor and dependency injection to give us a flexible easy to test function."><meta data-rh="true" property="og:description" content="To enable easy testing of our serverless applications there are some slight tweaks to make to our Lambda function. Instead of having a single constructor and performing all of our initiailization there, we are leveraging an internal constructor and dependency injection to give us a flexible easy to test function."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://serverlessdotnet.dev/docs/testing/test-ready-lambda-functions"><link data-rh="true" rel="alternate" href="https://serverlessdotnet.dev/docs/testing/test-ready-lambda-functions" hreflang="en"><link data-rh="true" rel="alternate" href="https://serverlessdotnet.dev/docs/testing/test-ready-lambda-functions" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ELBLZN8LN3"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-ELBLZN8LN3",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.e00d95ac.css">
<link rel="preload" href="/assets/js/runtime~main.983b73cc.js" as="script">
<link rel="preload" href="/assets/js/main.761a135f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">Serverless .NET</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/jeastham1993/serverless-dotnet.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/fundamentals">Fundamentals</a><button aria-label="Toggle the collapsible sidebar category &#x27;Fundamentals&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/your-first-lambda">Your First Lambda</a><button aria-label="Toggle the collapsible sidebar category &#x27;Your First Lambda&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/aspnet-on-lambda">ASP.NET on Lambda</a><button aria-label="Toggle the collapsible sidebar category &#x27;ASP.NET on Lambda&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/event-sources">Event Sources</a><button aria-label="Toggle the collapsible sidebar category &#x27;Event Sources&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/developer-tooling">Developer Tooling</a><button aria-label="Toggle the collapsible sidebar category &#x27;Developer Tooling&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/testing">Testing</a><button aria-label="Toggle the collapsible sidebar category &#x27;Testing&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/testing/serverless-testing-introduction">An Introduction to Serverless Testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/testing/test-ready-lambda-functions">Test Ready Lambda Functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/testing/unit-testing">Unit Test Your Business Logic</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/testing/integration-testing">Integration Test In The Cloud</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/ide-support">IDE Support</a><button aria-label="Toggle the collapsible sidebar category &#x27;IDE Support&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/observability">Observability</a><button aria-label="Toggle the collapsible sidebar category &#x27;Observability&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/build-patterns">Build Patterns</a><button aria-label="Toggle the collapsible sidebar category &#x27;Build Patterns&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/advanced-concepts">Advanced Concepts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Advanced Concepts&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/testing"><span itemprop="name">Testing</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Test Ready Lambda Functions</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Test Ready Lambda Functions</h1></header><p>To enable easy testing of our serverless applications there are some slight tweaks to make to our Lambda function. Instead of having a single constructor and performing all of our initiailization there, we are leveraging an internal constructor and dependency injection to give us a flexible easy to test function.</p>
<style class="ssmq-9">.ssmq-9.ssmq-default{display:block}.ssmq-9:not(.ssmq-default){display: none;}
@media not screen, (max-width: 768px){.ssmq-9.ssmq-notscreenmax-width768px{display:block}.ssmq-9:not(.ssmq-notscreenmax-width768px){display: none;}}</style><div class="ssmq-9 ssmq-notscreenmax-width768px"><section class="ch-scrollycoding-static"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-default-constructor">The Default Constructor<a class="hash-link" href="#the-default-constructor" title="Direct link to heading">​</a></h2><p>Remember, the Lambda service <strong>always</strong> needs a public, parameterless constructor. Without this, the Lambda service won&#x27;t be able to initialize your handler class.</p><div class="ch-codegroup not-prose"><div class="ch-editor-frame" style="background:#2e3440"><div class="ch-frame-title-bar" style="color:#C5C5C5;background:#2e3440"><div class="ch-frame-buttons"><div class="ch-frame-button ch-frame-button-left"></div><div class="ch-frame-button-space"></div><div class="ch-frame-button ch-frame-button-middle"></div><div class="ch-frame-button-space"></div><div class="ch-frame-button ch-frame-button-right"></div></div><div title="Function.cs" data-ch-tab="north" class="ch-editor-tab ch-editor-tab-active" style="background:#3b4252;color:#d8dee9;border-right-color:#3b425200;border-bottom-color:#88c0d000"><div><span style="opacity:0.5"></span>Function.cs</div></div><div style="flex:1;min-width:0.8em"></div></div><div data-ch-panel="north" style="flex-grow:1;overflow:hidden"><div class="ch-code-wrapper" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto;height:100%"><code class="ch-code-scroll-parent"><br><div><div style="display:inline-block;margin-left:16px"><span>public class Function</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    private static ListStorageAreasQueryHandler _queryHandler;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    private static ILogger&lt;Function&gt; _logger;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    public Function() : this(null, null)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    internal Function(ListStorageAreasQueryHandler handler, ILogger&lt;Function&gt; logger)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        AWSSDKHandler.RegisterXRayForAllServices();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        </span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        _queryHandler = handler ?? Startup.ServiceProvider.GetRequiredService&lt;ListStorageAreasQueryHandler&gt;();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        _logger = logger ?? Startup.ServiceProvider.GetRequiredService&lt;ILogger&lt;Function&gt;&gt;();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    public async Task&lt;APIGatewayProxyResponse&gt; Handler(APIGatewayProxyRequest apigProxyEvent,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        ILambdaContext context)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        try</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            var queryResult = await _queryHandler.Handle(new ListStorageAreasQuery());</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            return new APIGatewayProxyResponse</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                Body = JsonSerializer.Serialize(queryResult),</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                StatusCode = 200,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                Headers = new Dictionary&lt;string, string&gt; {{&quot;Content-Type&quot;, &quot;application/json&quot;}}</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            };</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        catch (AmazonS3Exception e)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            context.Logger.LogLine(e.Message);</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            context.Logger.LogLine(e.StackTrace);</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            return new APIGatewayProxyResponse</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                Body = &quot;[]&quot;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                StatusCode = 500,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                Headers = new Dictionary&lt;string, string&gt; {{&quot;Content-Type&quot;, &quot;application/json&quot;}}</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            };</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="an-internal-constructor">An internal constructor<a class="hash-link" href="#an-internal-constructor" title="Direct link to heading">​</a></h2><p>All of our initialization logic is seperated into an internal constructor. Notice how the public constructor Lambda will use calls out internal constructor, passing in null values for the services required.</p><p>This gives us an entrypoint in which we can pass in mock implementations of our services to test how the logic of our Lambda functions functions with different event payloads.</p><div class="ch-codegroup not-prose"><div class="ch-editor-frame" style="background:#2e3440"><div class="ch-frame-title-bar" style="color:#C5C5C5;background:#2e3440"><div class="ch-frame-buttons"><div class="ch-frame-button ch-frame-button-left"></div><div class="ch-frame-button-space"></div><div class="ch-frame-button ch-frame-button-middle"></div><div class="ch-frame-button-space"></div><div class="ch-frame-button ch-frame-button-right"></div></div><div title="Function.cs" data-ch-tab="north" class="ch-editor-tab ch-editor-tab-active" style="background:#3b4252;color:#d8dee9;border-right-color:#3b425200;border-bottom-color:#88c0d000"><div><span style="opacity:0.5"></span>Function.cs</div></div><div style="flex:1;min-width:0.8em"></div></div><div data-ch-panel="north" style="flex-grow:1;overflow:hidden"><div class="ch-code-wrapper" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto;height:100%"><code class="ch-code-scroll-parent"><br><div><div style="display:inline-block;margin-left:16px"><span>public class Function</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    private static ListStorageAreasQueryHandler _queryHandler;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    private static ILogger&lt;Function&gt; _logger;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    public Function() : this(null, null)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    internal Function(ListStorageAreasQueryHandler handler, ILogger&lt;Function&gt; logger)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        AWSSDKHandler.RegisterXRayForAllServices();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        </span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        _queryHandler = handler ?? Startup.ServiceProvider.GetRequiredService&lt;ListStorageAreasQueryHandler&gt;();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        _logger = logger ?? Startup.ServiceProvider.GetRequiredService&lt;ILogger&lt;Function&gt;&gt;();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    public async Task&lt;APIGatewayProxyResponse&gt; Handler(APIGatewayProxyRequest apigProxyEvent,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        ILambdaContext context)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        try</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            var queryResult = await _queryHandler.Handle(new ListStorageAreasQuery());</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            return new APIGatewayProxyResponse</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                Body = JsonSerializer.Serialize(queryResult),</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                StatusCode = 200,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                Headers = new Dictionary&lt;string, string&gt; {{&quot;Content-Type&quot;, &quot;application/json&quot;}}</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            };</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        catch (AmazonS3Exception e)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            context.Logger.LogLine(e.Message);</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            context.Logger.LogLine(e.StackTrace);</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            return new APIGatewayProxyResponse</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                Body = &quot;[]&quot;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                StatusCode = 500,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                Headers = new Dictionary&lt;string, string&gt; {{&quot;Content-Type&quot;, &quot;application/json&quot;}}</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            };</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dependency-injection">Dependency Injection<a class="hash-link" href="#dependency-injection" title="Direct link to heading">​</a></h2><p>When deployed, the handler will be null. The function code will then fall back to the <span class="ch-inline-code not-prose"><code style="--ch-code-foreground:#d8dee9ff;background:#2e3440e6;color:#d8dee9ff"><span style="color:#D8DEE9">Startup</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">ServiceProvider</span></code></span> dependency injection container and load the <span class="ch-inline-code not-prose"><code style="--ch-code-foreground:#d8dee9ff;background:#2e3440e6;color:#d8dee9ff"><span style="color:#D8DEE9FF">ListStorageAreasQueryHandler</span></code></span> service. This gives us further control of how an application will run both under test and in the cloud.</p><div class="ch-codegroup not-prose"><div class="ch-editor-frame" style="background:#2e3440"><div class="ch-frame-title-bar" style="color:#C5C5C5;background:#2e3440"><div class="ch-frame-buttons"><div class="ch-frame-button ch-frame-button-left"></div><div class="ch-frame-button-space"></div><div class="ch-frame-button ch-frame-button-middle"></div><div class="ch-frame-button-space"></div><div class="ch-frame-button ch-frame-button-right"></div></div><div title="Function.cs" data-ch-tab="north" class="ch-editor-tab ch-editor-tab-active" style="background:#3b4252;color:#d8dee9;border-right-color:#3b425200;border-bottom-color:#88c0d000"><div><span style="opacity:0.5"></span>Function.cs</div></div><div style="flex:1;min-width:0.8em"></div></div><div data-ch-panel="north" style="flex-grow:1;overflow:hidden"><div class="ch-code-wrapper" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto;height:100%"><code class="ch-code-scroll-parent"><br><div><div style="display:inline-block;margin-left:16px"><span>public class Function</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    private static ListStorageAreasQueryHandler _queryHandler;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    private static ILogger&lt;Function&gt; _logger;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    public Function() : this(null, null)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    internal Function(ListStorageAreasQueryHandler handler, ILogger&lt;Function&gt; logger)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        AWSSDKHandler.RegisterXRayForAllServices();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        </span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        _queryHandler = handler ?? Startup.ServiceProvider.GetRequiredService&lt;ListStorageAreasQueryHandler&gt;();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        _logger = logger ?? Startup.ServiceProvider.GetRequiredService&lt;ILogger&lt;Function&gt;&gt;();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    public async Task&lt;APIGatewayProxyResponse&gt; Handler(APIGatewayProxyRequest apigProxyEvent,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        ILambdaContext context)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        try</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            var queryResult = await _queryHandler.Handle(new ListStorageAreasQuery());</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            return new APIGatewayProxyResponse</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                Body = JsonSerializer.Serialize(queryResult),</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                StatusCode = 200,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                Headers = new Dictionary&lt;string, string&gt; {{&quot;Content-Type&quot;, &quot;application/json&quot;}}</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            };</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        catch (AmazonS3Exception e)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            context.Logger.LogLine(e.Message);</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            context.Logger.LogLine(e.StackTrace);</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            return new APIGatewayProxyResponse</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                Body = &quot;[]&quot;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                StatusCode = 500,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                Headers = new Dictionary&lt;string, string&gt; {{&quot;Content-Type&quot;, &quot;application/json&quot;}}</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            };</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-dependency-injection">Configuring Dependency Injection<a class="hash-link" href="#configuring-dependency-injection" title="Direct link to heading">​</a></h2><p>A quick peek at the Startup class. A lazy loaded <span class="ch-inline-code not-prose"><code style="--ch-code-foreground:#d8dee9ff;background:#2e3440e6;color:#d8dee9ff"><span style="color:#D8DEE9FF">ServiceProvider</span></code></span> means that dependency injection will only be setup if required. If we had another Lambda function in our application that didn&#x27;t require any of these services, this setup would never run.</p><div class="ch-codegroup not-prose"><div class="ch-editor-frame" style="background:#2e3440"><div class="ch-frame-title-bar" style="color:#C5C5C5;background:#2e3440"><div class="ch-frame-buttons"><div class="ch-frame-button ch-frame-button-left"></div><div class="ch-frame-button-space"></div><div class="ch-frame-button ch-frame-button-middle"></div><div class="ch-frame-button-space"></div><div class="ch-frame-button ch-frame-button-right"></div></div><div title="Function.cs" data-ch-tab="north" class="ch-editor-tab ch-editor-tab-active" style="background:#3b4252;color:#d8dee9;border-right-color:#3b425200;border-bottom-color:#88c0d000"><div><span style="opacity:0.5"></span>Function.cs</div></div><div style="flex:1;min-width:0.8em"></div></div><div data-ch-panel="north" style="flex-grow:1;overflow:hidden"><div class="ch-code-wrapper" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto;height:100%"><code class="ch-code-scroll-parent"><br><div><div style="display:inline-block;margin-left:16px"><span>public static class Startup</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    private static ServiceProvider? _serviceProvider;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    public static ServiceProvider ServiceProvider</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        get</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            if (_serviceProvider == null)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                InitializeServiceProvider();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            return _serviceProvider;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        private set =&gt; _serviceProvider = value;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    private static void InitializeServiceProvider()</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        var services = new ServiceCollection();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        </span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        var logger = new LoggerConfiguration()</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            .WriteTo.Console(new RenderedCompactJsonFormatter())</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            .CreateLogger();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        </span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        services.AddLogging();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        services.AddSingleton&lt;IAmazonS3&gt;(new AmazonS3Client());</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        services.AddSingleton&lt;IStorageService, S3StorageService&gt;();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        services.AddSingleton&lt;ListStorageAreasQueryHandler&gt;();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        _serviceProvider = services.BuildServiceProvider();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div></div></div></section></div><div class="ssmq-9 ssmq-default"><section class="ch-scrollycoding"><div class="ch-scrollycoding-content"><div class="ch-scrollycoding-step-content" data-selected="true"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-default-constructor">The Default Constructor<a class="hash-link" href="#the-default-constructor" title="Direct link to heading">​</a></h2><p>Remember, the Lambda service <strong>always</strong> needs a public, parameterless constructor. Without this, the Lambda service won&#x27;t be able to initialize your handler class.</p></div><div class="ch-scrollycoding-step-content"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="an-internal-constructor">An internal constructor<a class="hash-link" href="#an-internal-constructor" title="Direct link to heading">​</a></h2><p>All of our initialization logic is seperated into an internal constructor. Notice how the public constructor Lambda will use calls out internal constructor, passing in null values for the services required.</p><p>This gives us an entrypoint in which we can pass in mock implementations of our services to test how the logic of our Lambda functions functions with different event payloads.</p></div><div class="ch-scrollycoding-step-content"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dependency-injection">Dependency Injection<a class="hash-link" href="#dependency-injection" title="Direct link to heading">​</a></h2><p>When deployed, the handler will be null. The function code will then fall back to the <span class="ch-inline-code not-prose"><code style="--ch-code-foreground:#d8dee9ff;background:#2e3440e6;color:#d8dee9ff"><span style="color:#D8DEE9">Startup</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">ServiceProvider</span></code></span> dependency injection container and load the <span class="ch-inline-code not-prose"><code style="--ch-code-foreground:#d8dee9ff;background:#2e3440e6;color:#d8dee9ff"><span style="color:#D8DEE9FF">ListStorageAreasQueryHandler</span></code></span> service. This gives us further control of how an application will run both under test and in the cloud.</p></div><div class="ch-scrollycoding-step-content"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-dependency-injection">Configuring Dependency Injection<a class="hash-link" href="#configuring-dependency-injection" title="Direct link to heading">​</a></h2><p>A quick peek at the Startup class. A lazy loaded <span class="ch-inline-code not-prose"><code style="--ch-code-foreground:#d8dee9ff;background:#2e3440e6;color:#d8dee9ff"><span style="color:#D8DEE9FF">ServiceProvider</span></code></span> means that dependency injection will only be setup if required. If we had another Lambda function in our application that didn&#x27;t require any of these services, this setup would never run.</p></div></div><div class="ch-scrollycoding-sticker"><div class="ch-codegroup not-prose"><div class="ch-editor-frame" style="background:#2e3440"><div class="ch-frame-title-bar" style="color:#C5C5C5;background:#2e3440"><div class="ch-frame-buttons"><div class="ch-frame-button ch-frame-button-left"></div><div class="ch-frame-button-space"></div><div class="ch-frame-button ch-frame-button-middle"></div><div class="ch-frame-button-space"></div><div class="ch-frame-button ch-frame-button-right"></div></div><div title="Function.cs" data-ch-tab="north" class="ch-editor-tab ch-editor-tab-active" style="background:#3b4252;color:#d8dee9;border-right-color:#3b425200;border-bottom-color:#88c0d000"><div><span style="opacity:0.5"></span>Function.cs</div></div><div style="flex:1;min-width:0.8em"></div><svg class="ch-editor-button" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="button"><title>Expand</title><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"></path></svg><dialog class="ch-expand-dialog"><svg class="ch-expand-close" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="button"><title>Close</title><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></dialog></div><div data-ch-panel="north" style="flex-grow:1;overflow:hidden"><div class="ch-code-wrapper" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto;height:100%"><code class="ch-code-scroll-parent"><br><div><div style="display:inline-block;margin-left:16px"><span>public class Function</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    private static ListStorageAreasQueryHandler _queryHandler;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    private static ILogger&lt;Function&gt; _logger;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    public Function() : this(null, null)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    internal Function(ListStorageAreasQueryHandler handler, ILogger&lt;Function&gt; logger)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        AWSSDKHandler.RegisterXRayForAllServices();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        </span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        _queryHandler = handler ?? Startup.ServiceProvider.GetRequiredService&lt;ListStorageAreasQueryHandler&gt;();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        _logger = logger ?? Startup.ServiceProvider.GetRequiredService&lt;ILogger&lt;Function&gt;&gt;();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    public async Task&lt;APIGatewayProxyResponse&gt; Handler(APIGatewayProxyRequest apigProxyEvent,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        ILambdaContext context)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        try</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            var queryResult = await _queryHandler.Handle(new ListStorageAreasQuery());</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            return new APIGatewayProxyResponse</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                Body = JsonSerializer.Serialize(queryResult),</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                StatusCode = 200,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                Headers = new Dictionary&lt;string, string&gt; {{&quot;Content-Type&quot;, &quot;application/json&quot;}}</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            };</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        catch (AmazonS3Exception e)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            context.Logger.LogLine(e.Message);</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            context.Logger.LogLine(e.StackTrace);</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            return new APIGatewayProxyResponse</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                Body = &quot;[]&quot;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                StatusCode = 500,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                Headers = new Dictionary&lt;string, string&gt; {{&quot;Content-Type&quot;, &quot;application/json&quot;}}</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            };</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div></div></div></div></section></div><script class="ssmq-9">!function(){for(var e=["not screen, (max-width: 768px)","default"],t=["ssmq-notscreenmax-width768px","ssmq-default"],s=document.getElementsByTagName("script"),o=s[s.length-1].parentNode,r=null,c=0;c<e.length-1;c++)if(window.matchMedia(e[c]).matches){r=o.querySelector(":scope > .ssmq-9."+t[c]);break}if(!r){var a=t.pop();r=o.querySelector(":scope > .ssmq-9."+a)}r.removeAttribute("class"),o.querySelectorAll(":scope > .ssmq-9").forEach((function(e){o.removeChild(e)}))}()</script>
<p>A final note, you&#x27;ll need to add the below code to an <span class="ch-inline-code not-prose"><code style="--ch-code-foreground:#d8dee9ff;background:#2e3440e6;color:#d8dee9ff"><span style="color:#D8DEE9">AssemblyInfo</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">cs</span></code></span> file in your Lambda function project. This allows a unit test project to access and use the internal constructor.</p>
<div class="ch-codegroup not-prose"><div class="ch-editor-frame" style="background:#2e3440"><div class="ch-frame-title-bar" style="color:#C5C5C5;background:#2e3440"><div class="ch-frame-buttons"><div class="ch-frame-button ch-frame-button-left"></div><div class="ch-frame-button-space"></div><div class="ch-frame-button ch-frame-button-middle"></div><div class="ch-frame-button-space"></div><div class="ch-frame-button ch-frame-button-right"></div></div><div title="AssemblyInfo.cs" data-ch-tab="north" class="ch-editor-tab ch-editor-tab-active" style="background:#3b4252;color:#d8dee9;border-right-color:#3b425200;border-bottom-color:#88c0d000"><div><span style="opacity:0.5"></span>AssemblyInfo.cs</div></div><div style="flex:1;min-width:0.8em"></div></div><div data-ch-panel="north" style="flex-grow:1;overflow:hidden"><div class="ch-code-wrapper" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto;height:100%"><code class="ch-code-scroll-parent"><br><div><div style="display:inline-block;margin-left:16px"><span>using System.Runtime.CompilerServices;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>[assembly:InternalsVisibleTo(&quot;ServerlessTestSamples.UnitTest&quot;)]</span></div></div><br></code></div></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="further-reading">Further Reading<a class="hash-link" href="#further-reading" title="Direct link to heading">​</a></h2>
<ul>
<li>The AWS Samples GitHub organisation contains a <a href="https://github.com/aws-samples/serverless-test-samples" target="_blank" rel="noopener noreferrer">serverless-test-samples repository</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/testing/test-ready-lambda-functions.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/testing/serverless-testing-introduction"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">An Introduction to Serverless Testing</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/testing/unit-testing"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Unit Test Your Business Logic</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-default-constructor" class="table-of-contents__link toc-highlight">The Default Constructor</a></li><li><a href="#an-internal-constructor" class="table-of-contents__link toc-highlight">An internal constructor</a></li><li><a href="#dependency-injection" class="table-of-contents__link toc-highlight">Dependency Injection</a></li><li><a href="#configuring-dependency-injection" class="table-of-contents__link toc-highlight">Configuring Dependency Injection</a></li><li><a href="#further-reading" class="table-of-contents__link toc-highlight">Further Reading</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Built by @plantpowerjames</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/plantpowerjames" target="_blank" rel="noopener noreferrer" class="footer__link-item">@plantpowerjames</a></li><li class="footer__item"><a href="https://github.com/jeastham1993/serverless-dotnet.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Report Issues on GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Serverless .NET. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.983b73cc.js"></script>
<script src="/assets/js/main.761a135f.js"></script>
</body>
</html>